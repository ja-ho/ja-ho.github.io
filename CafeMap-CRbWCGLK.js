import{d as R,r as k,u as le,a as $,s as T,c as z,o as U,b as K,w as L,v as O,e as b,f as oe,m as ie,g as B,h as I,i as S,_ as A,j as N,k as X,l as q,M as Q,B as p,n as ce,S as ue,p as pe,q as de,t as ve,x as E,y as F,z as se,A as fe,C as he,D as P,F as Z,E as ne,G as me,H as Ce,I as _e,J as we,K as ae,L as Me,N as ge,O as ye,P as Se,Q as re,R as xe,T as be,U as ke,V as J,W as Ve}from"./index-CNsB-U_4.js";const Ee="zocfhmyv19",ee="DDOKDDAK",De="[DDOKDDAK MAP] naver script load is failed",Fe=R({name:"NaverMap",__name:"NaverMap",props:{setCurrentPositionControl:{},centerPosition:{}},setup(s){const r=`https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=${Ee}`,e=s,{setCurrentPositionControl:a,centerPosition:l}=e,t=k(),w=le(),m=$(),{currentPosition:c,isMapLoaded:d,mapInstances:M,mapCallbackList:o,currentPositionMarker:v}=T(m),{fetchCurrentPosition:n,getCurrentMapIdByRoute:f}=m,V={latitude:37.4966085,longitude:127.0269023},x={latitude:V.latitude,longitude:V.longitude,zoom:15,mapDataControl:!1,disableDoubleClickZoom:!0,disableDoubleTapZoom:!0},D=async()=>{const h={...x};try{l?i(h,l):(await n(),i(h,c.value.coords))}catch(_){console.log(_)}return Object.assign(h,{center:new window.naver.maps.LatLng(h.latitude,h.longitude)}),{...h}},i=(h,_)=>{h.latitude=_.latitude,h.longitude=_.longitude},u=I(),C=z(()=>["cafemap","cafe"].includes(u.name)),g=async()=>{d.value=!1;const h=f(u.name),_=new window.naver.maps.Map(t.value,await D());M.value.set(h,_),d.value=!0,o.value.map(y=>y(_)),o.value=[],v.value=new naver.maps.Marker({position:new naver.maps.LatLng(c.value.coords.latitude,c.value.coords.longitude),map:_}),a&&Y()},H=h=>{if(document.getElementById(ee))return;const y=document.createElement("script");y.setAttribute("id",ee),y.setAttribute("type","text/javascript"),y.setAttribute("src",r),y.setAttribute("async",""),y.setAttribute("defer",""),y.onerror=()=>new Error(De),y.onload=()=>h(),document.head.appendChild(y)},Y=()=>{const h=`
      <a href="#" class="relative bottom-10 right-7">
        <svg fill="#000000" height="1.5rem" width="1.5rem" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
        viewBox="0 0 297 297" xml:space="preserve">
        <path d="M148.5,0C66.653,0,0.067,66.616,0.067,148.499C0.067,230.383,66.653,297,148.5,297s148.433-66.617,148.433-148.501
        C296.933,66.616,230.347,0,148.5,0z M158.597,276.411v-61.274c0-5.575-4.521-10.097-10.097-10.097s-10.097,4.521-10.097,10.097
        v61.274c-62.68-4.908-112.845-55.102-117.747-117.814h61.207c5.575,0,10.097-4.521,10.097-10.097s-4.522-10.097-10.097-10.097
        H20.656C25.558,75.69,75.723,25.497,138.403,20.589v61.274c0,5.575,4.521,10.097,10.097,10.097s10.097-4.521,10.097-10.097V20.589
        c62.681,4.908,112.846,55.102,117.747,117.814h-61.207c-5.575,0-10.097,4.521-10.097,10.097s4.521,10.097,10.097,10.097h61.207
        C271.441,221.31,221.276,271.503,158.597,276.411z"/>
        </svg>
      </a>`,_=f(u.name);naver.maps.Event.once(M.value.get(_),"init",()=>{const y=new naver.maps.CustomControl(h,{position:naver.maps.Position.RIGHT_BOTTOM});y.setMap(M.value.get(_)),naver.maps.Event.addDOMListener(y.getElement(),"click",async()=>{var G;await n(),(G=v.value)==null||G.setPosition(new naver.maps.LatLng(c.value.coords.latitude,c.value.coords.longitude)),M.value.get(_).panTo(new naver.maps.LatLng(c.value.coords.latitude,c.value.coords.longitude))})})};return U(()=>{window.naver?g():H(g)}),K(()=>{u.name&&m.removeMapInstance(u.name)}),(h,_)=>L((S(),b("div",ie({id:"map",ref_key:"mapElement",ref:t},B(w)),[oe(h.$slots,"default",{},void 0,!0)],16)),[[O,C.value]])}}),Re=A(Fe,[["__scopeId","data-v-0a0e729f"]]),Te=s=>{const r=k(s),e=$(),{mapInstances:a}=T(e),l=k(new Map),t=k(new Map),w=k(new Map),m=n=>`
    <div class="iw_inner">
      <h3>${n.name}</h3>
    </div>
    `,c=(n,f,V,x)=>{if(!a.value.get(x))return;const i=new naver.maps.InfoWindow({content:n,borderWidth:0,backgroundColor:"transparent",disableAnchor:!0,pixelOffset:new naver.maps.Point(0,60)}),u=t.value.get(x)||[];u.push(i),t.value.set(x,u);const C=N(),{setShortCardInfo:g,openShortCard:H}=C;naver.maps.Event.addListener(f,"click",()=>{g(V),H()})},d=n=>{const f=a.value.get(n);if(!f)return;const V=[];r.value.forEach(x=>{const D=new naver.maps.LatLng(x.latitude,x.longitude),i=new naver.maps.Marker({position:D,map:f,zIndex:100}),u=m(x);c(u,i,x.id,n),V.push(i)}),l.value.set(n,V)},M=n=>{const f=t.value.get(n);f&&(f.forEach(D=>D.close()),t.value.delete(n));const V=l.value.get(n);V&&(V.forEach(D=>D.setMap(null)),l.value.delete(n));const x=w.value.get(n);x&&(x.forEach(D=>{naver.maps.Event.removeListener(D)}),w.value.delete(n))},o=n=>{M(n),d(n)},v=n=>{r.value=n};return K(()=>{[...l.value.keys()].forEach(n=>{M(n)})}),{initializeMarkers:o,clearMarkers:M,updateCafeList:v}},He=R({__name:"NaverCafeMarkers",setup(s){const r=$(),e=X(),{displayCafes:a}=T(e),{initializeMarkers:l,clearMarkers:t,updateCafeList:w}=Te(a.value),m=I(),c=r.getCurrentMapIdByRoute(m.name);return q(()=>a.value,d=>{d&&d.length>0&&(w(d),t(c),l(c))}),U(()=>{a.value&&a.value.length>0&&l(c)}),(d,M)=>(S(),b("div"))}}),Be=s=>{const r=$(),{mapCallbackList:e,isMapLoaded:a}=T(r),l=I(),t=r.getMapInstance(l.name);a.value?s(t):e.value.push(s)},Le=s=>s===p.Open,Oe=s=>s===p.Half,te=s=>s===p.Full,W=s=>s===Q.Up,j=s=>s===Q.Down,Qe=(s,r)=>{const e=k(null),a=k(null),l=N(),{bottomSheetState:t}=T(l),{setBottomSheetState:w,closeSheetVisible:m,openSheetVisible:c}=l,d=k({touchStart:{sheetY:0,touchY:0},touchMove:{prevTouchY:0,movingDirection:Q.None,touchOffset:0},isContentAreaTouched:!1}),M=()=>{const{touchMove:i,isContentAreaTouched:u}=d.value;return!u||t.value===p.Open||t.value===p.Half?!0:i.movingDirection==="down"?a.value.scrollTop<=0:!1},o=()=>{var i,u,C,g;switch(t.value){case p.Close:(i=e.value)==null||i.style.setProperty("top",`${ve}`);break;case p.Open:(u=e.value)==null||u.style.setProperty("top",`${de}`);break;case p.Half:(C=e.value)==null||C.style.setProperty("top",`${pe}`);break;case p.Full:(g=e.value)==null||g.style.setProperty("top",`${ue}`);break;default:console.log("bottom sheet state can have only four states");break}},v=i=>{const{touchStart:u}=d.value;u.sheetY=e.value.getBoundingClientRect().y,u.touchY=i.touches[0].clientY},n=i=>{var H;const{touchStart:u,touchMove:C}=d.value,g=i.touches[0];C.prevTouchY===0&&(C.prevTouchY=u.touchY),C.prevTouchY<g.clientY&&(C.movingDirection=Q.Down),C.prevTouchY>g.clientY&&(C.movingDirection=Q.Up),M()?(i.preventDefault(),C.touchOffset=g.clientY-u.touchY,(H=e.value)==null||H.style.setProperty("top",`${g.clientY}px`)):document.body.style.overflowY="hidden"},f=i=>{document.body.style.overflowY="auto";const{touchStart:u,touchMove:C}=d.value,g=C.movingDirection,H=()=>{if(!(te(t.value)&&W(g)))switch(t.value){case p.Open:W(g)?t.value=p.Half:j(g)&&s&&(t.value=p.Close);break;case p.Half:j(g)?t.value=p.Open:W(g)&&(t.value=p.Full);break;case p.Full:j(g)?t.value=p.Half:h();break;default:h()}},Y=(_,y)=>_>y||_<-y,h=()=>{var _;(_=e.value)==null||_.style.setProperty("top",`${u.sheetY}px`)};Y(C.touchOffset,120)?(H(),o()):h(),d.value={touchStart:{sheetY:0,touchY:0},touchMove:{prevTouchY:0,movingDirection:Q.None,touchOffset:0},isContentAreaTouched:!1}},V=()=>{d.value.isContentAreaTouched=!0},x=()=>{const i=t.value;te(i)||(Oe(i)?w(p.Open):Le(i)?(m(),w(p.Close)):(c(),w(p.Open)))},D=()=>{let i=null;const u=I();if(!(u.name!=="cafemap"&&u.name!=="cafe"))return Be(C=>{C&&(i=naver.maps.Event.addListener(C,"click",x))}),()=>{i&&(naver.maps.Event.removeListener(i),i=null)}};return q(()=>t.value,o),U(()=>{r===!0?(t.value=p.Close,setTimeout(()=>{t.value=p.Half},500)):t.value=p.Close,e.value&&(e.value.addEventListener("touchstart",v,{passive:!0}),e.value.addEventListener("touchmove",n,{passive:!1}),e.value.addEventListener("touchend",f,{passive:!0})),a.value&&a.value.addEventListener("touchstart",V,{passive:!0}),D()}),ce(()=>{e.value&&(e.value.removeEventListener("touchstart",v),e.value.removeEventListener("touchmove",n),e.value.removeEventListener("touchend",f)),a.value&&a.value.removeEventListener("touchstart",V)}),{sheet:e,content:a,updateSheetRenderByState:o}},$e=R({__name:"Sheet",props:{canBottomClose:{type:Boolean,default:!1},isDefaultOn:{type:Boolean,default:!0}},setup(s){const r=s,{sheet:e,content:a}=Qe(r.canBottomClose,r.isDefaultOn);return(l,t)=>(S(),b("div",{ref_key:"sheet",ref:e,class:"wrapper fixed left-0 right-0 top-[2000px] z-[110] mx-auto flex w-full flex-col rounded-t-lg border-t-8 bg-[#fff] pb-9 shadow-[0_0_10px_rgba(0,0,0,0.6)]",style:se(`height:${B(he)}px`)},[E(fe),F("div",{ref_key:"content",ref:a,class:"content"},[oe(l.$slots,"default",{},void 0,!0)],512)],4))}}),Ae=A($e,[["__scopeId","data-v-ed52eb66"]]),ze=F("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75Z"},null,-1),Ue=[ze],Ie=R({__name:"QueueList",props:{size:{default:6}},setup(s){const r=s;return(e,a)=>(S(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:P(`w-${r.size} h-${r.size}`)},Ue,2))}}),Ne=F("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"},null,-1),Pe=[Ne],Ye=R({__name:"MagnifyingGlass",props:{size:{default:6}},setup(s){const r=s;return(e,a)=>(S(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:P(`absolute right-4 z-[120] mx-5 cursor-pointer transition-transform duration-200 ease-out hover:scale-125 w-${r.size} h-${r.size}`)},Pe,2))}}),We=F("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1),je=[We],Ze=R({__name:"X-Mark",props:{size:{default:6}},setup(s){const r=s;return(e,a)=>(S(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:P(`w-${r.size} h-${r.size}`)},je,2))}}),Ke=["onClick"],Xe=R({__name:"SwiperChips",props:{items:{},chipStyle:{}},emits:["remove"],setup(s){const r=s,e=k(null),a=k(null),l=k(0),t=k(!1),w=k(0),m=()=>!a.value||!e.value?!1:a.value.offsetWidth>e.value.offsetWidth,c=o=>{if(!m())return;t.value=!0;const v="touches"in o?o.touches[0].clientX:o.clientX;w.value=v-l.value,e.value&&(e.value.style.cursor="grabbing",e.value.style.userSelect="none")},d=o=>{if(!t.value||!m())return;o.preventDefault();const n=("touches"in o?o.touches[0].clientX:o.clientX)-w.value;if(a.value&&e.value){const f=-(a.value.offsetWidth-e.value.offsetWidth);l.value=Math.max(Math.min(n,0),f)}},M=()=>{t.value=!1,e.value&&(e.value.style.cursor="grab",e.value.style.userSelect="")};return(o,v)=>(S(),b("div",{ref_key:"containerRef",ref:e,class:"swiper-container relative overflow-x-auto",onMousedown:c,onMousemove:d,onMouseup:M,onMouseleave:M,onTouchstart:c,onTouchmove:d,onTouchend:M},[F("div",{ref_key:"scrollContainerRef",ref:a,class:"inline-flex gap-2 px-2",style:se({transform:`translateX(${l.value}px)`})},[(S(!0),b(Z,null,ne(r.items,n=>(S(),b("span",{key:n,class:P(["relative inline-flex items-center whitespace-nowrap rounded-full border-2 px-2 py-1 text-xs",o.chipStyle])},[me(Ce(n)+" ",1),F("button",{class:"ml-1 rounded-full p-0.5",onClick:f=>o.$emit("remove",n)},[E(Ze,{size:4,class:"text-slate-500"})],8,Ke)],2))),128))],4)],544))}}),qe=A(Xe,[["__scopeId","data-v-d26095a9"]]),Ge=s=>(ge("data-v-30e818f0"),s=s(),ye(),s),Je={class:"fixed left-1/2 top-0 z-[110] w-full -translate-x-1/2 transform-gpu sm:w-[640px]"},et={class:"mx-3"},tt={class:"grid w-full grid-cols-[auto_1fr_auto] items-center gap-x-2 py-4"},ot={class:"relative"},st=Ge(()=>F("input",{type:"text",placeholder:"카페, 지역, 키워드 검색",class:"w-full cursor-pointer rounded-full border-slate-200 pl-8 pr-4"},null,-1)),nt={key:0},at=R({__name:"CafeNavbar",props:{isShowNavFooter:{type:Boolean}},setup(s){const r=s,{isShowNavFooter:e}=_e(r),a=we(),{getSelectedKeywords:l}=a,t=z(()=>l()),w=m=>{a.removeSelectedKeyword(m)};return(m,c)=>(S(),b("div",Je,[F("div",et,[L(F("nav",tt,[E(Ie,{size:7,class:"ml-1"}),F("div",ot,[E(Ye,{class:"absolute left-2 top-1/2 -translate-y-1/2"}),st]),E(Me,{mx:0})],512),[[O,B(e)]])]),B(e)?(S(),b("div",nt,[E(qe,{items:t.value,chipStyle:"bg-white",onRemove:w},null,8,["items"])])):ae("",!0)]))}}),rt=A(at,[["__scopeId","data-v-30e818f0"]]),lt={class:"short-info-card z-[200]"},it=R({__name:"ShortInfoCard",setup(s){const r=X();T(r);const e=N(),{shortCardId:a}=T(e),{closeShortCard:l}=e,t=k(null),w=o=>{t.value=be.find(v=>v.id===o)},m=["https://images.unsplash.com/photo-1623035571030-1c4a27608e67?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NzF8fCVFQyVCQiVBNCVFRCU5NCVCQyUyMCVFQyU4OCU4RCUyMCVFQiVCMCVCMCVFQSVCMiVCRHxlbnwwfHwwfHx8MA%3D%3D","https://images.unsplash.com/photo-1542581509-7e87190743b6?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NzZ8fCVFQyVCQiVBNCVFRCU5NCVCQyUyMCVFQyU4OCU4RCUyMCVFQiVCMCVCMCVFQSVCMiVCRHxlbnwwfHwwfHx8MA%3D%3D","https://images.unsplash.com/photo-1533396371595-d46b0aa39bd2?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8ODR8fCVFQyVCQiVBNCVFRCU5NCVCQyUyMCVFQyU4OCU4RCUyMCVFQiVCMCVCMCVFQSVCMiVCRHxlbnwwfHwwfHx8MA%3D%3D","https://images.unsplash.com/photo-1660224319990-8b2633ebc50c?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OTZ8fCVFQyVCQiVBNCVFRCU5NCVCQyUyMCVFQyU4OCU4RCUyMCVFQiVCMCVCMCVFQSVCMiVCRHxlbnwwfHwwfHx8MA%3D%3D","https://images.unsplash.com/photo-1642706519891-14084332c59a?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTAyfHwlRUMlQkIlQTQlRUQlOTQlQkMlMjAlRUMlODglOEQlMjAlRUIlQjAlQjAlRUElQjIlQkR8ZW58MHx8MHx8fDA%3D"],c=o=>{o.target.tagName!=="AREA"&&l()},d=()=>{const o=document.getElementById("map");o&&(o.addEventListener("click",c,!1),o.addEventListener("touchstart",c,!1))},M=()=>{xe.push({name:"cafe",params:{id:t.value.id}})};return q(a,(o,v)=>{v!==o&&w(o)}),U(()=>{d()}),K(()=>{const o=document.getElementById("map");o&&(o.removeEventListener("click",c),o.removeEventListener("touchstart",c))}),(o,v)=>(S(),b("section",lt,[t.value!==null?(S(),Se(re,{key:0,id:t.value.id,name:t.value.name,point:t.value.grade_point,address:t.value.address,hasKeyword:!1,pictures:m,pictureHeightPercent:"70",pictureWidthPercent:"30",onClick:M},null,8,["id","name","point","address"])):ae("",!0)]))}}),ct=A(it,[["__scopeId","data-v-27de9bae"]]),ut={class:"fixed left-0 top-0 z-[110] h-full w-full bg-white"},pt={class:"h-full"},vt=R({name:"CafeMap",__name:"CafeMap",setup(s){const r=X();T(r);const e=N(),{isSheetVisible:a,isShortCardVisible:l,bottomSheetState:t}=T(e),w=["https://images.unsplash.com/photo-1623035571030-1c4a27608e67?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NzF8fCVFQyVCQiVBNCVFRCU5NCVCQyUyMCVFQyU4OCU4RCUyMCVFQiVCMCVCMCVFQSVCMiVCRHxlbnwwfHwwfHx8MA%3D%3D"],m=z(()=>t.value!==p.Close),c=z(()=>t.value===p.Full),d=$(),M=()=>{const v=d.getCurrentMapIdByRoute("cafemap"),n=d.getMapInstance(v);n&&n.setSize(new naver.maps.Size(window.innerWidth,window.innerHeight))},o=v=>v.split(",");return ke(()=>{M()}),(v,n)=>(S(),b(Z,null,[L(F("div",ut,null,512),[[O,c.value]]),E(rt,{isShowNavFooter:m.value},null,8,["isShowNavFooter"]),F("div",pt,[E(Re,{class:"h-full w-full sm:h-[800px]",setCurrentPositionControl:!0},{default:J(()=>[E(He)]),_:1})]),L(E(Ve,null,null,512),[[O,m.value]]),L(E(Ae,null,{default:J(()=>[(S(!0),b(Z,null,ne(B(r).displayCafes,f=>(S(),b("div",null,[E(re,{id:f.id,name:f.name,point:f.grade_point,address:f.address,hasKeyword:!0,keyword:o(f.keyword),pictures:w},null,8,["id","name","point","address","keyword"])]))),256))]),_:1},512),[[O,!B(l)]]),L(E(ct,null,null,512),[[O,B(l)]])],64))}});export{vt as default};
