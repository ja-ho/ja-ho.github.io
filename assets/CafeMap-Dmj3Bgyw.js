import{d as D,r as Q,u as X,a as E,s as S,c as T,o as I,b as U,w as F,v as R,e as y,f as ee,m as te,g as z,h as Z,i as x,_ as L,j as N,k as O,l as q,n as K,p as b,q as se,t as Y,x as ae,y as oe,z as ne,A as re,B as V,C as $,S as ie,F as j,D as ce,E as le,G as ue,H as pe,I as de}from"./index-orty6r4r.js";const me="zocfhmyv19",W="DDOKDDAK",fe="[DDOKDDAK MAP] naver script load is failed",Ce=D({name:"NaverMap",__name:"NaverMap",props:{setCurrentPositionControl:{},centerPosition:{}},setup(c){const o=`https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=${me}`,C=c,{setCurrentPositionControl:l,centerPosition:i}=C,a=Q(),h=X(),v=E(),{currentPosition:s,isMapLoaded:d,mapInstances:u,mapCallbackList:e,currentPositionMarker:r}=S(v),{fetchCurrentPosition:t,getCurrentMapIdByRoute:M}=v,w={latitude:37.4966085,longitude:127.0269023},m={latitude:w.latitude,longitude:w.longitude,zoom:15,mapDataControl:!1,disableDoubleClickZoom:!0,disableDoubleTapZoom:!0},_=async()=>{const n={...m};try{i?k(n,i):(await t(),k(n,s.value.coords))}catch(p){console.log(p)}return Object.assign(n,{center:new window.naver.maps.LatLng(n.latitude,n.longitude)}),{...n}},k=(n,p)=>{n.latitude=p.latitude,n.longitude=p.longitude},g=Z(),B=T(()=>["cafemap","cafe"].includes(g.name)),A=async()=>{d.value=!1;const n=M(g.name),p=new window.naver.maps.Map(a.value,await _());u.value.set(n,p),d.value=!0,e.value.map(f=>f(p)),e.value=[],r.value=new naver.maps.Marker({position:new naver.maps.LatLng(s.value.coords.latitude,s.value.coords.longitude),map:p}),l&&J()},H=n=>{if(document.getElementById(W))return;const f=document.createElement("script");f.setAttribute("id",W),f.setAttribute("type","text/javascript"),f.setAttribute("src",o),f.setAttribute("async",""),f.setAttribute("defer",""),f.onerror=()=>new Error(fe),f.onload=()=>n(),document.head.appendChild(f)},J=()=>{const n=`
      <a href="#" class="relative bottom-10 right-7">
        <svg fill="#000000" height="1.5rem" width="1.5rem" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
        viewBox="0 0 297 297" xml:space="preserve">
        <path d="M148.5,0C66.653,0,0.067,66.616,0.067,148.499C0.067,230.383,66.653,297,148.5,297s148.433-66.617,148.433-148.501
        C296.933,66.616,230.347,0,148.5,0z M158.597,276.411v-61.274c0-5.575-4.521-10.097-10.097-10.097s-10.097,4.521-10.097,10.097
        v61.274c-62.68-4.908-112.845-55.102-117.747-117.814h61.207c5.575,0,10.097-4.521,10.097-10.097s-4.522-10.097-10.097-10.097
        H20.656C25.558,75.69,75.723,25.497,138.403,20.589v61.274c0,5.575,4.521,10.097,10.097,10.097s10.097-4.521,10.097-10.097V20.589
        c62.681,4.908,112.846,55.102,117.747,117.814h-61.207c-5.575,0-10.097,4.521-10.097,10.097s4.521,10.097,10.097,10.097h61.207
        C271.441,221.31,221.276,271.503,158.597,276.411z"/>
        </svg>
      </a>`,p=M(g.name);naver.maps.Event.once(u.value.get(p),"init",()=>{const f=new naver.maps.CustomControl(n,{position:naver.maps.Position.RIGHT_BOTTOM});f.setMap(u.value.get(p)),naver.maps.Event.addDOMListener(f.getElement(),"click",async()=>{var P;await t(),(P=r.value)==null||P.setPosition(new naver.maps.LatLng(s.value.coords.latitude,s.value.coords.longitude)),u.value.get(p).panTo(new naver.maps.LatLng(s.value.coords.latitude,s.value.coords.longitude))})})};return I(()=>{window.naver?A():H(A)}),U(()=>{g.name&&v.removeMapInstance(g.name)}),(n,p)=>F((x(),y("div",te({id:"map",ref_key:"mapElement",ref:a},z(h)),[ee(n.$slots,"default",{},void 0,!0)],16)),[[R,B.value]])}}),ve=L(Ce,[["__scopeId","data-v-0a0e729f"]]),he=c=>{const o=Q(c),C=E(),{mapInstances:l}=S(C),i=Q(new Map),a=Q(new Map),h=Q(new Map),v=t=>`
    <div class="iw_inner">
      <h3>${t.name}</h3>
    </div>
    `,s=(t,M,w,m)=>{if(!l.value.get(m))return;const k=new naver.maps.InfoWindow({content:t,borderWidth:0,backgroundColor:"transparent",disableAnchor:!0,pixelOffset:new naver.maps.Point(0,60)}),g=a.value.get(m)||[];g.push(k),a.value.set(m,g);const B=N(),{setShortCardInfo:A,openShortCard:H}=B;naver.maps.Event.addListener(M,"click",()=>{A(w),H()})},d=t=>{const M=l.value.get(t);if(!M)return;const w=[];o.value.forEach(m=>{const _=new naver.maps.LatLng(m.latitude,m.longitude),k=new naver.maps.Marker({position:_,map:M,zIndex:100}),g=v(m);s(g,k,m.id,t),w.push(k)}),i.value.set(t,w)},u=t=>{const M=a.value.get(t);M&&(M.forEach(_=>_.close()),a.value.delete(t));const w=i.value.get(t);w&&(w.forEach(_=>_.setMap(null)),i.value.delete(t));const m=h.value.get(t);m&&(m.forEach(_=>{naver.maps.Event.removeListener(_)}),h.value.delete(t))},e=t=>{u(t),d(t)},r=t=>{o.value=t};return U(()=>{[...i.value.keys()].forEach(t=>{u(t)})}),{initializeMarkers:e,clearMarkers:u,updateCafeList:r}},Me=D({__name:"NaverCafeMarkers",setup(c){const o=E(),C=O(),{displayCafes:l}=S(C),{initializeMarkers:i,clearMarkers:a,updateCafeList:h}=he(l.value),v=Z(),s=o.getCurrentMapIdByRoute(v.name);return q(l,d=>{d&&d.length>0&&(h(d),a(s),i(s))}),I(()=>{l.value&&l.value.length>0&&i(s)}),(d,u)=>(x(),y("div"))}}),we=b("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75Z"},null,-1),_e=[we],ge=D({__name:"QueueList",props:{size:{default:6}},setup(c){const o=c;return(C,l)=>(x(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:K(`w-${o.size} h-${o.size}`)},_e,2))}}),xe=b("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"},null,-1),Ve=[xe],ye=D({__name:"MagnifyingGlass",props:{size:{default:6}},setup(c){const o=c;return(C,l)=>(x(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:K(`absolute right-4 z-[120] mx-5 cursor-pointer transition-transform duration-200 ease-out hover:scale-125 w-${o.size} h-${o.size}`)},Ve,2))}}),be={class:"short-info-card z-[200]"},ke=D({__name:"ShortInfoCard",setup(c){const o=O();S(o);const C=N(),{shortCardId:l}=S(C),{closeShortCard:i}=C,a=Q(null),h=e=>{a.value=ne.find(r=>r.id===e)},v=["https://images.unsplash.com/photo-1623035571030-1c4a27608e67?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NzF8fCVFQyVCQiVBNCVFRCU5NCVCQyUyMCVFQyU4OCU4RCUyMCVFQiVCMCVCMCVFQSVCMiVCRHxlbnwwfHwwfHx8MA%3D%3D","https://images.unsplash.com/photo-1542581509-7e87190743b6?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NzZ8fCVFQyVCQiVBNCVFRCU5NCVCQyUyMCVFQyU4OCU4RCUyMCVFQiVCMCVCMCVFQSVCMiVCRHxlbnwwfHwwfHx8MA%3D%3D","https://images.unsplash.com/photo-1533396371595-d46b0aa39bd2?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8ODR8fCVFQyVCQiVBNCVFRCU5NCVCQyUyMCVFQyU4OCU4RCUyMCVFQiVCMCVCMCVFQSVCMiVCRHxlbnwwfHwwfHx8MA%3D%3D","https://images.unsplash.com/photo-1660224319990-8b2633ebc50c?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OTZ8fCVFQyVCQiVBNCVFRCU5NCVCQyUyMCVFQyU4OCU4RCUyMCVFQiVCMCVCMCVFQSVCMiVCRHxlbnwwfHwwfHx8MA%3D%3D","https://images.unsplash.com/photo-1642706519891-14084332c59a?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTAyfHwlRUMlQkIlQTQlRUQlOTQlQkMlMjAlRUMlODglOEQlMjAlRUIlQjAlQjAlRUElQjIlQkR8ZW58MHx8MHx8fDA%3D"],s=e=>{e.target.tagName!=="AREA"&&i()},d=()=>{const e=document.getElementById("map");e&&(e.addEventListener("click",s,!1),e.addEventListener("touchstart",s,!1))},u=()=>{oe.push({name:"cafe",params:{id:a.value.id}})};return q(l,(e,r)=>{r!==e&&h(e)}),I(()=>{d()}),U(()=>{const e=document.getElementById("map");e&&(e.removeEventListener("click",s),e.removeEventListener("touchstart",s))}),(e,r)=>(x(),y("section",be,[a.value!==null?(x(),se(Y,{key:0,id:a.value.id,name:a.value.name,point:a.value.grade_point,address:a.value.address,hasKeyword:!1,pictures:v,pictureHeightPercent:"70",pictureWidthPercent:"30",onClick:u},null,8,["id","name","point","address"])):ae("",!0)]))}}),Se=L(ke,[["__scopeId","data-v-27de9bae"]]),G=c=>(ue("data-v-d7f591d6"),c=c(),pe(),c),Qe={class:"fixed left-1/2 top-0 z-[110] w-full -translate-x-1/2 transform-gpu sm:w-[640px]"},De={class:"flex w-full items-center py-4"},Fe=G(()=>b("div",{class:"search-bar flex-1 px-1"},[b("input",{type:"text",placeholder:"카페, 지역, 키워드 검색",class:"border-slate-2001 form-input mx-4 inline-block w-[90%] cursor-pointer rounded-full"})],-1)),Re=G(()=>b("span",{class:"absolute left-1/2 top-[4.5rem] z-[120] -translate-x-1/2 transform-gpu cursor-pointer rounded-full bg-black px-2 py-1 text-xs text-slate-300"},"현 지도에서 찾기",-1)),Ae={class:"h-full"},ze=D({name:"CafeMap",__name:"CafeMap",setup(c){const o=O();S(o);const C=N(),{isSheetVisible:l,isShortCardVisible:i,bottomSheetState:a}=S(C),h=["https://images.unsplash.com/photo-1623035571030-1c4a27608e67?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NzF8fCVFQyVCQiVBNCVFRCU5NCVCQyUyMCVFQyU4OCU4RCUyMCVFQiVCMCVCMCVFQSVCMiVCRHxlbnwwfHwwfHx8MA%3D%3D"],v=T(()=>a.value!==de.Close),s=E(),d=()=>{const u=s.getCurrentMapIdByRoute("cafemap"),e=s.getMapInstance(u);e&&e.setSize(new naver.maps.Size(window.innerWidth,window.innerHeight))};return re(()=>{d()}),(u,e)=>(x(),y(j,null,[b("div",Qe,[F(b("nav",De,[V(ge,{size:7,class:""}),Fe,V(ye),Re],512),[[R,v.value]])]),b("div",Ae,[V(ve,{class:"h-full w-full sm:h-[800px]",setCurrentPositionControl:!0},{default:$(()=>[V(Me)]),_:1})]),F(V(ce,null,null,512),[[R,v.value]]),F(V(ie,null,{default:$(()=>[(x(!0),y(j,null,le(z(o).displayCafes,r=>(x(),y("div",null,[V(Y,{id:r.id,name:r.name,point:r.grade_point,address:r.address,hasKeyword:!0,keyword:r.keyword,pictures:h},null,8,["id","name","point","address","keyword"])]))),256))]),_:1},512),[[R,!z(i)]]),F(V(Se,null,null,512),[[R,z(i)]])],64))}}),Be=L(ze,[["__scopeId","data-v-d7f591d6"]]);export{Be as default};
