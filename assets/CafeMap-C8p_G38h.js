import{d as S,r as F,u as X,a as B,s as k,c as j,o as E,b as H,w as Q,v as D,e as x,f as ee,m as te,g as A,h as W,i as w,_ as z,j as I,k as se,l as T,n as Z,p as g,q,t as oe,x as ae,y as K,z as ne,A as re,B as _,C as O,S as ie,F as P,D as ce,E as le,G as ue,H as pe,I as de}from"./index-B2zU0BVS.js";const me="zocfhmyv19",$="DDOKDDAK",Ce="[DDOKDDAK MAP] naver script load is failed",fe=S({name:"NaverMap",__name:"NaverMap",props:{setCurrentPositionControl:{},centerPosition:{}},setup(r){const n=`https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=${me}`,u=r,{setCurrentPositionControl:i,centerPosition:d}=u,t=F(),f=X(),h=B(),{currentPosition:s,isMapLoaded:v,mapInstances:M,mapCallbackList:e,currentPositionMarker:a}=k(h),{fetchCurrentPosition:C,getCurrentMapIdByRoute:c}=h,m={latitude:37.4966085,longitude:127.0269023},y={latitude:m.latitude,longitude:m.longitude,zoom:15,mapDataControl:!1,disableDoubleClickZoom:!0,disableDoubleTapZoom:!0},b=async()=>{const o={...y};try{d?R(o,d):(await C(),R(o,s.value.coords))}catch(l){console.log(l)}return Object.assign(o,{center:new window.naver.maps.LatLng(o.latitude,o.longitude)}),{...o}},R=(o,l)=>{o.latitude=l.latitude,o.longitude=l.longitude},V=W(),U=j(()=>["cafemap","cafe"].includes(V.name)),L=async()=>{v.value=!1;const o=c(V.name),l=new window.naver.maps.Map(t.value,await b());M.value.set(o,l),v.value=!0,e.value.map(p=>p(l)),e.value=[],a.value=new naver.maps.Marker({position:new naver.maps.LatLng(s.value.coords.latitude,s.value.coords.longitude),map:l}),i&&J()},G=o=>{if(document.getElementById($))return;const p=document.createElement("script");p.setAttribute("id",$),p.setAttribute("type","text/javascript"),p.setAttribute("src",n),p.setAttribute("async",""),p.setAttribute("defer",""),p.onerror=()=>new Error(Ce),p.onload=()=>o(),document.head.appendChild(p)},J=()=>{const o=`
      <a href="#" class="relative bottom-10 right-7">
        <svg fill="#000000" height="1.5rem" width="1.5rem" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
        viewBox="0 0 297 297" xml:space="preserve">
        <path d="M148.5,0C66.653,0,0.067,66.616,0.067,148.499C0.067,230.383,66.653,297,148.5,297s148.433-66.617,148.433-148.501
        C296.933,66.616,230.347,0,148.5,0z M158.597,276.411v-61.274c0-5.575-4.521-10.097-10.097-10.097s-10.097,4.521-10.097,10.097
        v61.274c-62.68-4.908-112.845-55.102-117.747-117.814h61.207c5.575,0,10.097-4.521,10.097-10.097s-4.522-10.097-10.097-10.097
        H20.656C25.558,75.69,75.723,25.497,138.403,20.589v61.274c0,5.575,4.521,10.097,10.097,10.097s10.097-4.521,10.097-10.097V20.589
        c62.681,4.908,112.846,55.102,117.747,117.814h-61.207c-5.575,0-10.097,4.521-10.097,10.097s4.521,10.097,10.097,10.097h61.207
        C271.441,221.31,221.276,271.503,158.597,276.411z"/>
        </svg>
      </a>`,l=c(V.name);naver.maps.Event.once(M.value.get(l),"init",()=>{const p=new naver.maps.CustomControl(o,{position:naver.maps.Position.RIGHT_BOTTOM});p.setMap(M.value.get(l)),naver.maps.Event.addDOMListener(p.getElement(),"click",async()=>{var N;await C(),(N=a.value)==null||N.setPosition(new naver.maps.LatLng(s.value.coords.latitude,s.value.coords.longitude)),M.value.get(l).panTo(new naver.maps.LatLng(s.value.coords.latitude,s.value.coords.longitude))})})};return E(()=>{window.naver?L():G(L)}),H(()=>{V.name&&h.removeMapInstance(V.name)}),(o,l)=>Q((w(),x("div",te({id:"map",ref_key:"mapElement",ref:t},A(f)),[ee(o.$slots,"default",{},void 0,!0)],16)),[[D,U.value]])}}),he=z(fe,[["__scopeId","data-v-0a0e729f"]]),ve=r=>{const n=B(),{mapInstances:u}=k(n),i=F(new Map),d=F(new Map),t=F(new Map),f=e=>`
    <div class="iw_inner">
      <h3>${e.name}</h3>
    </div>
    `,h=(e,a,C,c)=>{if(!u.value.get(c))return;const y=new naver.maps.InfoWindow({content:e,borderWidth:0,backgroundColor:"transparent",disableAnchor:!0,pixelOffset:new naver.maps.Point(0,60)}),b=d.value.get(c)||[];b.push(y),d.value.set(c,b);const R=I(),{setShortCardInfo:V,openShortCard:U}=R;naver.maps.Event.addListener(a,"click",()=>{V(C),U()})},s=e=>{const a=u.value.get(e);if(!a)return;const C=[];r.forEach(c=>{const m=new naver.maps.LatLng(c.latitude,c.longitude),y=new naver.maps.Marker({position:m,map:a,zIndex:100}),b=f(c);h(b,y,c.id,e),C.push(y)}),i.value.set(e,C)},v=e=>{const a=d.value.get(e);a&&(a.forEach(m=>m.close()),d.value.delete(e));const C=i.value.get(e);C&&(C.forEach(m=>m.setMap(null)),i.value.delete(e));const c=t.value.get(e);c&&(c.forEach(m=>{naver.maps.Event.removeListener(m)}),t.value.delete(e))},M=e=>{v(e),s(e)};return H(()=>{[...i.value.keys()].forEach(e=>{v(e)})}),{initializeMarkers:M,clearMarkers:v}},Me=S({__name:"NaverCafeMarkers",setup(r){const n=W(),u=B(),{getCurrentMapIdByRoute:i}=u,{initializeMarkers:d}=ve(T);return E(()=>{const t=i(n.name);se(f=>{d(t)})}),(t,f)=>(w(),x("div"))}}),we=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75Z"},null,-1),_e=[we],xe=S({__name:"QueueList",props:{size:{default:6}},setup(r){const n=r;return(u,i)=>(w(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:Z(`w-${n.size} h-${n.size}`)},_e,2))}}),ge=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"},null,-1),Ve=[ge],ye=S({__name:"MagnifyingGlass",props:{size:{default:6}},setup(r){const n=r;return(u,i)=>(w(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:Z(`absolute right-4 z-[120] mx-5 cursor-pointer transition-transform duration-200 ease-out hover:scale-125 w-${n.size} h-${n.size}`)},Ve,2))}}),be={class:"short-info-card z-[200]"},ke=S({__name:"ShortInfoCard",setup(r){const n=q();k(n);const u=I(),{shortCardId:i}=k(u),{closeShortCard:d}=u,t=F(null),f=e=>{t.value=T.find(a=>a.id===e)},h=["https://images.unsplash.com/photo-1623035571030-1c4a27608e67?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NzF8fCVFQyVCQiVBNCVFRCU5NCVCQyUyMCVFQyU4OCU4RCUyMCVFQiVCMCVCMCVFQSVCMiVCRHxlbnwwfHwwfHx8MA%3D%3D","https://images.unsplash.com/photo-1542581509-7e87190743b6?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NzZ8fCVFQyVCQiVBNCVFRCU5NCVCQyUyMCVFQyU4OCU4RCUyMCVFQiVCMCVCMCVFQSVCMiVCRHxlbnwwfHwwfHx8MA%3D%3D","https://images.unsplash.com/photo-1533396371595-d46b0aa39bd2?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8ODR8fCVFQyVCQiVBNCVFRCU5NCVCQyUyMCVFQyU4OCU4RCUyMCVFQiVCMCVCMCVFQSVCMiVCRHxlbnwwfHwwfHx8MA%3D%3D","https://images.unsplash.com/photo-1660224319990-8b2633ebc50c?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OTZ8fCVFQyVCQiVBNCVFRCU5NCVCQyUyMCVFQyU4OCU4RCUyMCVFQiVCMCVCMCVFQSVCMiVCRHxlbnwwfHwwfHx8MA%3D%3D","https://images.unsplash.com/photo-1642706519891-14084332c59a?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTAyfHwlRUMlQkIlQTQlRUQlOTQlQkMlMjAlRUMlODglOEQlMjAlRUIlQjAlQjAlRUElQjIlQkR8ZW58MHx8MHx8fDA%3D"],s=e=>{e.target.tagName!=="AREA"&&d()},v=()=>{const e=document.getElementById("map");e&&(e.addEventListener("click",s,!1),e.addEventListener("touchstart",s,!1))},M=()=>{re.push({name:"cafe",params:{id:t.value.id}})};return oe(i,(e,a)=>{a!==e&&f(e)}),E(()=>{v()}),H(()=>{const e=document.getElementById("map");e&&(e.removeEventListener("click",s),e.removeEventListener("touchstart",s))}),(e,a)=>(w(),x("section",be,[t.value!==null?(w(),ae(K,{key:0,id:t.value.id,name:t.value.name,point:t.value.grade_point,address:t.value.address,hasKeyword:!1,pictures:h,pictureHeightPercent:"70",pictureWidthPercent:"30",onClick:M},null,8,["id","name","point","address"])):ne("",!0)]))}}),Se=z(ke,[["__scopeId","data-v-27de9bae"]]),Y=r=>(ue("data-v-4208d6de"),r=r(),pe(),r),Qe={class:"fixed left-1/2 top-0 z-[110] w-full -translate-x-1/2 transform-gpu sm:w-[640px]"},De={class:"flex w-full items-center py-4"},Fe=Y(()=>g("div",{class:"search-bar flex-1 px-1"},[g("input",{type:"text",placeholder:"카페, 지역, 키워드 검색",class:"border-slate-2001 form-input mx-4 inline-block w-[90%] cursor-pointer rounded-full"})],-1)),Re=Y(()=>g("span",{class:"absolute left-1/2 top-[4.5rem] z-[120] -translate-x-1/2 transform-gpu cursor-pointer rounded-full bg-black px-2 py-1 text-xs text-slate-300"},"현 지도에서 찾기",-1)),Ae={class:"h-full"},Ee=S({name:"CafeMap",__name:"CafeMap",setup(r){const n=q(),{devCafeList:u}=k(n),i=I(),{isSheetVisible:d,isShortCardVisible:t,bottomSheetState:f}=k(i),h=["https://images.unsplash.com/photo-1623035571030-1c4a27608e67?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NzF8fCVFQyVCQiVBNCVFRCU5NCVCQyUyMCVFQyU4OCU4RCUyMCVFQiVCMCVCMCVFQSVCMiVCRHxlbnwwfHwwfHx8MA%3D%3D"],s=j(()=>f.value!==de.Close);return E(()=>{}),(v,M)=>(w(),x(P,null,[g("div",Qe,[Q(g("nav",De,[_(xe,{size:7,class:""}),Fe,_(ye),Re],512),[[D,s.value]])]),g("div",Ae,[_(he,{class:"h-full w-full sm:h-[800px]",setCurrentPositionControl:!0},{default:O(()=>[_(Me)]),_:1})]),Q(_(ce,null,null,512),[[D,s.value]]),Q(_(ie,null,{default:O(()=>[(w(!0),x(P,null,le(A(u),e=>(w(),x("div",null,[_(K,{id:e.id,name:e.name,point:e.grade_point,address:e.address,hasKeyword:!0,keyword:e.keyword,pictures:h},null,8,["id","name","point","address","keyword"])]))),256))]),_:1},512),[[D,!A(t)]]),Q(_(Se,null,null,512),[[D,A(t)]])],64))}}),Be=z(Ee,[["__scopeId","data-v-4208d6de"]]);export{Be as default};
