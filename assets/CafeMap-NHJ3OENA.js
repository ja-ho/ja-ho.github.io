import{d as S,r as F,u as X,a as z,s as y,c as j,o as E,b as H,w as Q,v as D,e as x,f as ee,m as te,g as A,h as W,i as M,_ as I,j as U,k as se,l as T,n as Z,p as g,q,t as oe,x as ae,y as K,z as ne,A as re,B as ie,C as _,D as O,S as ce,F as P,E as le,G as ue,H as pe,I as de,J as me}from"./index-BhXgrhZr.js";const Ce="zocfhmyv19",$="DDOKDDAK",fe="[DDOKDDAK MAP] naver script load is failed",he=S({name:"NaverMap",__name:"NaverMap",props:{setCurrentPositionControl:{},centerPosition:{}},setup(c){const i=`https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=${Ce}`,p=c,{setCurrentPositionControl:l,centerPosition:C}=p,t=F(),v=X(),w=z(),{currentPosition:a,isMapLoaded:f,mapInstances:h,mapCallbackList:e,currentPositionMarker:s}=y(w),{fetchCurrentPosition:d,getCurrentMapIdByRoute:o}=w,n={latitude:37.4966085,longitude:127.0269023},b={latitude:n.latitude,longitude:n.longitude,zoom:15,mapDataControl:!1,disableDoubleClickZoom:!0,disableDoubleTapZoom:!0},k=async()=>{const r={...b};try{C?R(r,C):(await d(),R(r,a.value.coords))}catch(u){console.log(u)}return Object.assign(r,{center:new window.naver.maps.LatLng(r.latitude,r.longitude)}),{...r}},R=(r,u)=>{r.latitude=u.latitude,r.longitude=u.longitude},V=W(),B=j(()=>["cafemap","cafe"].includes(V.name)),L=async()=>{f.value=!1;const r=o(V.name),u=new window.naver.maps.Map(t.value,await k());h.value.set(r,u),f.value=!0,e.value.map(m=>m(u)),e.value=[],s.value=new naver.maps.Marker({position:new naver.maps.LatLng(a.value.coords.latitude,a.value.coords.longitude),map:u}),l&&J()},G=r=>{if(document.getElementById($))return;const m=document.createElement("script");m.setAttribute("id",$),m.setAttribute("type","text/javascript"),m.setAttribute("src",i),m.setAttribute("async",""),m.setAttribute("defer",""),m.onerror=()=>new Error(fe),m.onload=()=>r(),document.head.appendChild(m)},J=()=>{const r=`
      <a href="#" class="relative bottom-10 right-7">
        <svg fill="#000000" height="1.5rem" width="1.5rem" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
        viewBox="0 0 297 297" xml:space="preserve">
        <path d="M148.5,0C66.653,0,0.067,66.616,0.067,148.499C0.067,230.383,66.653,297,148.5,297s148.433-66.617,148.433-148.501
        C296.933,66.616,230.347,0,148.5,0z M158.597,276.411v-61.274c0-5.575-4.521-10.097-10.097-10.097s-10.097,4.521-10.097,10.097
        v61.274c-62.68-4.908-112.845-55.102-117.747-117.814h61.207c5.575,0,10.097-4.521,10.097-10.097s-4.522-10.097-10.097-10.097
        H20.656C25.558,75.69,75.723,25.497,138.403,20.589v61.274c0,5.575,4.521,10.097,10.097,10.097s10.097-4.521,10.097-10.097V20.589
        c62.681,4.908,112.846,55.102,117.747,117.814h-61.207c-5.575,0-10.097,4.521-10.097,10.097s4.521,10.097,10.097,10.097h61.207
        C271.441,221.31,221.276,271.503,158.597,276.411z"/>
        </svg>
      </a>`,u=o(V.name);naver.maps.Event.once(h.value.get(u),"init",()=>{const m=new naver.maps.CustomControl(r,{position:naver.maps.Position.RIGHT_BOTTOM});m.setMap(h.value.get(u)),naver.maps.Event.addDOMListener(m.getElement(),"click",async()=>{var N;await d(),(N=s.value)==null||N.setPosition(new naver.maps.LatLng(a.value.coords.latitude,a.value.coords.longitude)),h.value.get(u).panTo(new naver.maps.LatLng(a.value.coords.latitude,a.value.coords.longitude))})})};return E(()=>{window.naver?L():G(L)}),H(()=>{V.name&&w.removeMapInstance(V.name)}),(r,u)=>Q((M(),x("div",te({id:"map",ref_key:"mapElement",ref:t},A(v)),[ee(r.$slots,"default",{},void 0,!0)],16)),[[D,B.value]])}}),ve=I(he,[["__scopeId","data-v-0a0e729f"]]),we=c=>{const i=z(),{mapInstances:p}=y(i),l=F(new Map),C=F(new Map),t=F(new Map),v=e=>`
    <div class="iw_inner">
      <h3>${e.name}</h3>
    </div>
    `,w=(e,s,d,o)=>{if(!p.value.get(o))return;const b=new naver.maps.InfoWindow({content:e,borderWidth:0,backgroundColor:"transparent",disableAnchor:!0,pixelOffset:new naver.maps.Point(0,60)}),k=C.value.get(o)||[];k.push(b),C.value.set(o,k);const R=U(),{setShortCardInfo:V,openShortCard:B}=R;naver.maps.Event.addListener(s,"click",()=>{V(d),B()})},a=e=>{const s=p.value.get(e);if(!s)return;const d=[];c.forEach(o=>{const n=new naver.maps.LatLng(o.latitude,o.longitude),b=new naver.maps.Marker({position:n,map:s,zIndex:100}),k=v(o);w(k,b,o.id,e),d.push(b)}),l.value.set(e,d)},f=e=>{const s=C.value.get(e);s&&(s.forEach(n=>n.close()),C.value.delete(e));const d=l.value.get(e);d&&(d.forEach(n=>n.setMap(null)),l.value.delete(e));const o=t.value.get(e);o&&(o.forEach(n=>{naver.maps.Event.removeListener(n)}),t.value.delete(e))},h=e=>{f(e),a(e)};return H(()=>{[...l.value.keys()].forEach(e=>{f(e)})}),{initializeMarkers:h,clearMarkers:f}},Me=S({__name:"NaverCafeMarkers",setup(c){const i=W(),p=z(),{getCurrentMapIdByRoute:l}=p,{initializeMarkers:C}=we(T);return E(()=>{const t=l(i.name);se(v=>{C(t)})}),(t,v)=>(M(),x("div"))}}),_e=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75Z"},null,-1),xe=[_e],ge=S({__name:"QueueList",props:{size:{default:6}},setup(c){const i=c;return(p,l)=>(M(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:Z(`w-${i.size} h-${i.size}`)},xe,2))}}),Ve=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"},null,-1),ye=[Ve],be=S({__name:"MagnifyingGlass",props:{size:{default:6}},setup(c){const i=c;return(p,l)=>(M(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:Z(`absolute right-4 z-[120] mx-5 cursor-pointer transition-transform duration-200 ease-out hover:scale-125 w-${i.size} h-${i.size}`)},ye,2))}}),ke={class:"short-info-card z-[200]"},Se=S({__name:"ShortInfoCard",setup(c){const i=q();y(i);const p=U(),{shortCardId:l}=y(p),{closeShortCard:C}=p,t=F(null),v=e=>{t.value=T.find(s=>s.id===e)},w=["https://images.unsplash.com/photo-1623035571030-1c4a27608e67?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NzF8fCVFQyVCQiVBNCVFRCU5NCVCQyUyMCVFQyU4OCU4RCUyMCVFQiVCMCVCMCVFQSVCMiVCRHxlbnwwfHwwfHx8MA%3D%3D","https://images.unsplash.com/photo-1542581509-7e87190743b6?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NzZ8fCVFQyVCQiVBNCVFRCU5NCVCQyUyMCVFQyU4OCU4RCUyMCVFQiVCMCVCMCVFQSVCMiVCRHxlbnwwfHwwfHx8MA%3D%3D","https://images.unsplash.com/photo-1533396371595-d46b0aa39bd2?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8ODR8fCVFQyVCQiVBNCVFRCU5NCVCQyUyMCVFQyU4OCU4RCUyMCVFQiVCMCVCMCVFQSVCMiVCRHxlbnwwfHwwfHx8MA%3D%3D","https://images.unsplash.com/photo-1660224319990-8b2633ebc50c?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OTZ8fCVFQyVCQiVBNCVFRCU5NCVCQyUyMCVFQyU4OCU4RCUyMCVFQiVCMCVCMCVFQSVCMiVCRHxlbnwwfHwwfHx8MA%3D%3D","https://images.unsplash.com/photo-1642706519891-14084332c59a?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTAyfHwlRUMlQkIlQTQlRUQlOTQlQkMlMjAlRUMlODglOEQlMjAlRUIlQjAlQjAlRUElQjIlQkR8ZW58MHx8MHx8fDA%3D"],a=e=>{e.target.tagName!=="AREA"&&C()},f=()=>{const e=document.getElementById("map");e&&(e.addEventListener("click",a,!1),e.addEventListener("touchstart",a,!1))},h=()=>{re.push({name:"cafe",params:{id:t.value.id}})};return oe(l,(e,s)=>{s!==e&&v(e)}),E(()=>{f()}),H(()=>{const e=document.getElementById("map");e&&(e.removeEventListener("click",a),e.removeEventListener("touchstart",a))}),(e,s)=>(M(),x("section",ke,[t.value!==null?(M(),ae(K,{key:0,id:t.value.id,name:t.value.name,point:t.value.grade_point,address:t.value.address,hasKeyword:!1,pictures:w,pictureHeightPercent:"70",pictureWidthPercent:"30",onClick:h},null,8,["id","name","point","address"])):ne("",!0)]))}}),Qe=I(Se,[["__scopeId","data-v-27de9bae"]]),Y=c=>(pe("data-v-e389b24b"),c=c(),de(),c),De={class:"fixed left-1/2 top-0 z-[110] w-full -translate-x-1/2 transform-gpu sm:w-[640px]"},Fe={class:"flex w-full items-center py-4"},Re=Y(()=>g("div",{class:"search-bar flex-1 px-1"},[g("input",{type:"text",placeholder:"카페, 지역, 키워드 검색",class:"border-slate-2001 form-input mx-4 inline-block w-[90%] cursor-pointer rounded-full"})],-1)),Ae=Y(()=>g("span",{class:"absolute left-1/2 top-[4.5rem] z-[120] -translate-x-1/2 transform-gpu cursor-pointer rounded-full bg-black px-2 py-1 text-xs text-slate-300"},"현 지도에서 찾기",-1)),ze={class:"h-full"},Ee=S({name:"CafeMap",__name:"CafeMap",setup(c){const i=q(),{devCafeList:p}=y(i),l=U(),{isSheetVisible:C,isShortCardVisible:t,bottomSheetState:v}=y(l),w=["https://images.unsplash.com/photo-1623035571030-1c4a27608e67?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NzF8fCVFQyVCQiVBNCVFRCU5NCVCQyUyMCVFQyU4OCU4RCUyMCVFQiVCMCVCMCVFQSVCMiVCRHxlbnwwfHwwfHx8MA%3D%3D"],a=j(()=>v.value!==me.Close),f=z(),{mapInstances:h}=y(f),{getCurrentMapIdByRoute:e}=f,s=()=>{const d=e("cafemap"),o=h.value.get(d);o&&o.setSize(new naver.maps.Size(window.innerWidth,window.innerHeight))};return E(()=>{}),ie(()=>{s()}),(d,o)=>(M(),x(P,null,[g("div",De,[Q(g("nav",Fe,[_(ge,{size:7,class:""}),Re,_(be),Ae],512),[[D,a.value]])]),g("div",ze,[_(ve,{class:"h-full w-full sm:h-[800px]",setCurrentPositionControl:!0},{default:O(()=>[_(Me)]),_:1})]),Q(_(le,null,null,512),[[D,a.value]]),Q(_(ce,null,{default:O(()=>[(M(!0),x(P,null,ue(A(p),n=>(M(),x("div",null,[_(K,{id:n.id,name:n.name,point:n.grade_point,address:n.address,hasKeyword:!0,keyword:n.keyword,pictures:w},null,8,["id","name","point","address","keyword"])]))),256))]),_:1},512),[[D,!A(t)]]),Q(_(Qe,null,null,512),[[D,A(t)]])],64))}}),He=I(Ee,[["__scopeId","data-v-e389b24b"]]);export{He as default};
